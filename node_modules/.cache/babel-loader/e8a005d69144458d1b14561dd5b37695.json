{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\clara\\\\Documents\\\\personalSite\\\\clara-nolan.github.io\\\\src\\\\3d-components\\\\Bloom.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\nimport { useScroll } from '@react-three/drei';\nimport { EffectComposer, Bloom as UnrealBloomPass } from '@react-three/postprocessing';\n\nfunction Bloom(_ref) {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  const {\n    gl,\n    size\n  } = useThree();\n  const [scene, setScene] = useState();\n  const composer = useRef();\n  const scroll = useScroll();\n  useEffect(() => void scene && composer.current.setSize(size.width, size.height), [size, scene]);\n  useEffect(() => {\n    gl.toneMappingExposure = 0.5;\n  }, [gl]);\n  useFrame(state => {\n    const bloomIndex = scroll.range(0.7, 0.3); //lower the bloom as we get near the end\n\n    gl.toneMappingExposure = Math.sin(state.clock.getElapsedTime()) / (3 + 25 * bloomIndex) + (0.66 - 0.41 * bloomIndex);\n  }, 1);\n  return /*#__PURE__*/React.createElement(EffectComposer, {\n    ref: composer,\n    args: [gl],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"scene\", {\n    setScene: setScene,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }\n  }, children), /*#__PURE__*/React.createElement(UnrealBloomPass, {\n    luminanceThreshold: 0,\n    luminanceSmoothing: 0,\n    height: 700,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Bloom, \"OWgCnyuCLvwPyZCgcNV2mYPsn6o=\", false, function () {\n  return [useThree, useScroll, useFrame];\n});\n\n_c = Bloom;\nexport default Bloom;\n\nvar _c;\n\n$RefreshReg$(_c, \"Bloom\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useThree","useFrame","useScroll","EffectComposer","Bloom","UnrealBloomPass","children","gl","size","scene","setScene","composer","scroll","current","setSize","width","height","toneMappingExposure","state","bloomIndex","range","Math","sin","clock","getElapsedTime"],"sources":["C:/Users/clara/Documents/personalSite/clara-nolan.github.io/src/3d-components/Bloom.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useThree, useFrame } from '@react-three/fiber';\r\nimport { useScroll } from '@react-three/drei';\r\nimport {\r\n  EffectComposer,\r\n  Bloom as UnrealBloomPass,\r\n} from '@react-three/postprocessing';\r\n\r\nfunction Bloom({ children }) {\r\n  const { gl, size } = useThree();\r\n  const [scene, setScene] = useState();\r\n  const composer = useRef();\r\n  const scroll = useScroll();\r\n\r\n  useEffect(\r\n    () => void scene && composer.current.setSize(size.width, size.height),\r\n    [size, scene]\r\n  );\r\n\r\n  useEffect(() => {\r\n    gl.toneMappingExposure = 0.5;\r\n  }, [gl]);\r\n\r\n  useFrame((state) => {\r\n    const bloomIndex = scroll.range(0.7, 0.3);\r\n\r\n    //lower the bloom as we get near the end\r\n    gl.toneMappingExposure =\r\n      Math.sin(state.clock.getElapsedTime()) / (3 + 25 * bloomIndex) +\r\n      (0.66 - 0.41 * bloomIndex);\r\n  }, 1);\r\n\r\n  return (\r\n    <EffectComposer ref={composer} args={[gl]}>\r\n      <scene setScene={setScene}>{children}</scene>\r\n      <UnrealBloomPass\r\n        luminanceThreshold={0}\r\n        luminanceSmoothing={0}\r\n        height={700}\r\n      />\r\n    </EffectComposer>\r\n  );\r\n}\r\n\r\nexport default Bloom;\r\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,QAAT,EAAmBC,QAAnB,QAAmC,oBAAnC;AACA,SAASC,SAAT,QAA0B,mBAA1B;AACA,SACEC,cADF,EAEEC,KAAK,IAAIC,eAFX,QAGO,6BAHP;;AAKA,SAASD,KAAT,OAA6B;EAAA;;EAAA,IAAd;IAAEE;EAAF,CAAc;EAC3B,MAAM;IAAEC,EAAF;IAAMC;EAAN,IAAeR,QAAQ,EAA7B;EACA,MAAM,CAACS,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,EAAlC;EACA,MAAMc,QAAQ,GAAGZ,MAAM,EAAvB;EACA,MAAMa,MAAM,GAAGV,SAAS,EAAxB;EAEAJ,SAAS,CACP,MAAM,KAAKW,KAAL,IAAcE,QAAQ,CAACE,OAAT,CAAiBC,OAAjB,CAAyBN,IAAI,CAACO,KAA9B,EAAqCP,IAAI,CAACQ,MAA1C,CADb,EAEP,CAACR,IAAD,EAAOC,KAAP,CAFO,CAAT;EAKAX,SAAS,CAAC,MAAM;IACdS,EAAE,CAACU,mBAAH,GAAyB,GAAzB;EACD,CAFQ,EAEN,CAACV,EAAD,CAFM,CAAT;EAIAN,QAAQ,CAAEiB,KAAD,IAAW;IAClB,MAAMC,UAAU,GAAGP,MAAM,CAACQ,KAAP,CAAa,GAAb,EAAkB,GAAlB,CAAnB,CADkB,CAGlB;;IACAb,EAAE,CAACU,mBAAH,GACEI,IAAI,CAACC,GAAL,CAASJ,KAAK,CAACK,KAAN,CAAYC,cAAZ,EAAT,KAA0C,IAAI,KAAKL,UAAnD,KACC,OAAO,OAAOA,UADf,CADF;EAGD,CAPO,EAOL,CAPK,CAAR;EASA,oBACE,oBAAC,cAAD;IAAgB,GAAG,EAAER,QAArB;IAA+B,IAAI,EAAE,CAACJ,EAAD,CAArC;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IAAO,QAAQ,EAAEG,QAAjB;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GAA4BJ,QAA5B,CADF,eAEE,oBAAC,eAAD;IACE,kBAAkB,EAAE,CADtB;IAEE,kBAAkB,EAAE,CAFtB;IAGE,MAAM,EAAE,GAHV;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAFF,CADF;AAUD;;GAlCQF,K;UACcJ,Q,EAGNE,S,EAWfD,Q;;;KAfOG,K;AAoCT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}