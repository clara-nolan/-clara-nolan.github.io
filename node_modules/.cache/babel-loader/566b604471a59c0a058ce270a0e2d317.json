{"ast":null,"code":"import { WebGLCubeRenderTarget, HalfFloatType } from 'three';\nimport * as React from 'react';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nfunction CubeCamera(_ref) {\n  let {\n    children,\n    fog,\n    frames = Infinity,\n    resolution = 256,\n    near = 0.1,\n    far = 1000,\n    envMap,\n    ...props\n  } = _ref;\n  const ref = React.useRef();\n  const [camera, setCamera] = React.useState(null);\n  const scene = useThree(_ref2 => {\n    let {\n      scene\n    } = _ref2;\n    return scene;\n  });\n  const gl = useThree(_ref3 => {\n    let {\n      gl\n    } = _ref3;\n    return gl;\n  });\n  const fbo = React.useMemo(() => {\n    const fbo = new WebGLCubeRenderTarget(resolution);\n    fbo.texture.encoding = gl.outputEncoding;\n    fbo.texture.type = HalfFloatType;\n    return fbo;\n  }, [resolution]);\n  let count = 0;\n  let originalFog;\n  let originalBackground;\n  useFrame(() => {\n    if (camera && ref.current && (frames === Infinity || count < frames)) {\n      ref.current.visible = false;\n      originalFog = scene.fog;\n      originalBackground = scene.background;\n      scene.background = envMap || originalBackground;\n      scene.fog = fog || originalFog;\n      camera.update(gl, scene);\n      scene.fog = originalFog;\n      scene.background = originalBackground;\n      ref.current.visible = true;\n      count++;\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", props, /*#__PURE__*/React.createElement(\"cubeCamera\", {\n    ref: setCamera,\n    args: [near, far, fbo]\n  }), /*#__PURE__*/React.createElement(\"group\", {\n    ref: ref\n  }, children(fbo.texture)));\n}\n\nexport { CubeCamera };","map":null,"metadata":{},"sourceType":"module"}