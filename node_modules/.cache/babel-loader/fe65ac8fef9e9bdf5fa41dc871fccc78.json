{"ast":null,"code":"import _extends from \"C:/Users/clara/Documents/personalSite/clara-nolan.github.io/node_modules/@babel/runtime/helpers/esm/extends.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\clara\\\\Documents\\\\personalSite\\\\clara-nolan.github.io\\\\src\\\\3d-components\\\\cube\\\\index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef } from 'react';\nimport { useFrame } from '@react-three/fiber';\nimport { useScroll, useGLTF, useAnimations } from '@react-three/drei';\nimport * as THREE from 'three';\nimport useStore from '../../context/mainStore';\nimport useSetColor from './hooks/useSetColor';\nimport Page from './components/Page';\nimport model from \"../../assets/cube.glb\";\nconst START_POINT = 0.69;\n\nfunction Box(props) {\n  _s();\n\n  const {\n    setFloatingCamera\n  } = useStore(store => store);\n  const {\n    scene,\n    nodes,\n    animations\n  } = useGLTF(model);\n  const {\n    actions\n  } = useAnimations(animations, scene);\n  const scroll = useScroll();\n  const parent = useRef();\n  useSetColor(nodes);\n  useEffect(() => {\n    animations.forEach(animation => {\n      void (actions[animation.name].play().paused = true);\n    });\n  }, [actions, animations]);\n  useFrame((state, delta) => {\n    const offset = scroll.range(START_POINT, 0.4);\n    const cubeCapTransparencyOffset = scroll.range(START_POINT, 0.2);\n    const visibleRange = scroll.range(0.9, 0.1); //set up the opacity for head component\n\n    nodes['Cube002'].children.map(face => face.material.opacity = 1 - cubeCapTransparencyOffset);\n    animations.forEach(animation => {\n      const action = actions[animation.name];\n      actions[animation.name].time = THREE.MathUtils.damp(action.time, action.getClip().duration * offset, 100, delta);\n    });\n  });\n  return /*#__PURE__*/React.createElement(\"group\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    ref: parent,\n    onClick: () => {\n      setFloatingCamera(false);\n    },\n    scale: [12, 12, 12],\n    object: scene\n  }, props, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }\n  })), /*#__PURE__*/React.createElement(Page, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 7\n    }\n  }));\n}\n\n_s(Box, \"Wzytmr2xR7tL8IJAF7kxlsxabmM=\", false, function () {\n  return [useStore, useGLTF, useAnimations, useScroll, useSetColor, useFrame];\n});\n\n_c = Box;\nexport default Box;\n\nvar _c;\n\n$RefreshReg$(_c, \"Box\");","map":{"version":3,"names":["React","useEffect","useRef","useFrame","useScroll","useGLTF","useAnimations","THREE","useStore","useSetColor","Page","model","START_POINT","Box","props","setFloatingCamera","store","scene","nodes","animations","actions","scroll","parent","forEach","animation","name","play","paused","state","delta","offset","range","cubeCapTransparencyOffset","visibleRange","children","map","face","material","opacity","action","time","MathUtils","damp","getClip","duration"],"sources":["C:/Users/clara/Documents/personalSite/clara-nolan.github.io/src/3d-components/cube/index.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\r\nimport { useFrame } from '@react-three/fiber';\r\nimport { useScroll, useGLTF, useAnimations } from '@react-three/drei';\r\nimport * as THREE from 'three';\r\n\r\nimport useStore from '../../context/mainStore';\r\nimport useSetColor from './hooks/useSetColor';\r\nimport Page from './components/Page';\r\n\r\nimport model from '~/src/assets/cube.glb';\r\n\r\nconst START_POINT = 0.69;\r\n\r\nfunction Box(props) {\r\n  const { setFloatingCamera } = useStore((store) => store);\r\n  const { scene, nodes, animations } = useGLTF(model);\r\n  const { actions } = useAnimations(animations, scene);\r\n  const scroll = useScroll();\r\n  const parent = useRef();\r\n\r\n  useSetColor(nodes);\r\n\r\n  useEffect(() => {\r\n    animations.forEach((animation) => {\r\n      void (actions[animation.name].play().paused = true);\r\n    });\r\n  }, [actions, animations]);\r\n\r\n  useFrame((state, delta) => {\r\n    const offset = scroll.range(START_POINT, 0.4);\r\n    const cubeCapTransparencyOffset = scroll.range(START_POINT, 0.2);\r\n    const visibleRange = scroll.range(0.9, 0.1);\r\n\r\n    //set up the opacity for head component\r\n    nodes['Cube002'].children.map(\r\n      (face) => (face.material.opacity = 1 - cubeCapTransparencyOffset)\r\n    );\r\n\r\n    animations.forEach((animation) => {\r\n      const action = actions[animation.name];\r\n      actions[animation.name].time = THREE.MathUtils.damp(\r\n        action.time,\r\n        action.getClip().duration * offset,\r\n        100,\r\n        delta\r\n      );\r\n    });\r\n  });\r\n\r\n  return (\r\n    <group>\r\n      <primitive\r\n        ref={parent}\r\n        onClick={() => {\r\n          setFloatingCamera(false);\r\n        }}\r\n        scale={[12, 12, 12]}\r\n        object={scene}\r\n        {...props}\r\n      />\r\n      <Page />\r\n    </group>\r\n  );\r\n}\r\n\r\nexport default Box;\r\n"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,SAAT,EAAoBC,OAApB,EAA6BC,aAA7B,QAAkD,mBAAlD;AACA,OAAO,KAAKC,KAAZ,MAAuB,OAAvB;AAEA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,WAAP,MAAwB,qBAAxB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AAEA,OAAOC,KAAP,MAAkB,uBAAlB;AAEA,MAAMC,WAAW,GAAG,IAApB;;AAEA,SAASC,GAAT,CAAaC,KAAb,EAAoB;EAAA;;EAClB,MAAM;IAAEC;EAAF,IAAwBP,QAAQ,CAAEQ,KAAD,IAAWA,KAAZ,CAAtC;EACA,MAAM;IAAEC,KAAF;IAASC,KAAT;IAAgBC;EAAhB,IAA+Bd,OAAO,CAACM,KAAD,CAA5C;EACA,MAAM;IAAES;EAAF,IAAcd,aAAa,CAACa,UAAD,EAAaF,KAAb,CAAjC;EACA,MAAMI,MAAM,GAAGjB,SAAS,EAAxB;EACA,MAAMkB,MAAM,GAAGpB,MAAM,EAArB;EAEAO,WAAW,CAACS,KAAD,CAAX;EAEAjB,SAAS,CAAC,MAAM;IACdkB,UAAU,CAACI,OAAX,CAAoBC,SAAD,IAAe;MAChC,MAAMJ,OAAO,CAACI,SAAS,CAACC,IAAX,CAAP,CAAwBC,IAAxB,GAA+BC,MAA/B,GAAwC,IAA9C;IACD,CAFD;EAGD,CAJQ,EAIN,CAACP,OAAD,EAAUD,UAAV,CAJM,CAAT;EAMAhB,QAAQ,CAAC,CAACyB,KAAD,EAAQC,KAAR,KAAkB;IACzB,MAAMC,MAAM,GAAGT,MAAM,CAACU,KAAP,CAAanB,WAAb,EAA0B,GAA1B,CAAf;IACA,MAAMoB,yBAAyB,GAAGX,MAAM,CAACU,KAAP,CAAanB,WAAb,EAA0B,GAA1B,CAAlC;IACA,MAAMqB,YAAY,GAAGZ,MAAM,CAACU,KAAP,CAAa,GAAb,EAAkB,GAAlB,CAArB,CAHyB,CAKzB;;IACAb,KAAK,CAAC,SAAD,CAAL,CAAiBgB,QAAjB,CAA0BC,GAA1B,CACGC,IAAD,IAAWA,IAAI,CAACC,QAAL,CAAcC,OAAd,GAAwB,IAAIN,yBADzC;IAIAb,UAAU,CAACI,OAAX,CAAoBC,SAAD,IAAe;MAChC,MAAMe,MAAM,GAAGnB,OAAO,CAACI,SAAS,CAACC,IAAX,CAAtB;MACAL,OAAO,CAACI,SAAS,CAACC,IAAX,CAAP,CAAwBe,IAAxB,GAA+BjC,KAAK,CAACkC,SAAN,CAAgBC,IAAhB,CAC7BH,MAAM,CAACC,IADsB,EAE7BD,MAAM,CAACI,OAAP,GAAiBC,QAAjB,GAA4Bd,MAFC,EAG7B,GAH6B,EAI7BD,KAJ6B,CAA/B;IAMD,CARD;EASD,CAnBO,CAAR;EAqBA,oBACE;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACE;IACE,GAAG,EAAEP,MADP;IAEE,OAAO,EAAE,MAAM;MACbP,iBAAiB,CAAC,KAAD,CAAjB;IACD,CAJH;IAKE,KAAK,EAAE,CAAC,EAAD,EAAK,EAAL,EAAS,EAAT,CALT;IAME,MAAM,EAAEE;EANV,GAOMH,KAPN;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,GADF,eAUE,oBAAC,IAAD;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EAVF,CADF;AAcD;;GAlDQD,G;UACuBL,Q,EACOH,O,EACjBC,a,EACLF,S,EAGfK,W,EAQAN,Q;;;KAfOU,G;AAoDT,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}