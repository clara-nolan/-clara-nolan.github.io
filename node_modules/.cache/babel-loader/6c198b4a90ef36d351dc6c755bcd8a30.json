{"ast":null,"code":"import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport { MeshStandardMaterial, Color } from 'three';\nimport mergeRefs from 'react-merge-refs';\nimport { MarchingCubes as MarchingCubes$1 } from 'three-stdlib';\nimport { useFrame } from '@react-three/fiber';\nconst globalContext = /*#__PURE__*/React.createContext(null);\nconst MarchingCubes = /*#__PURE__*/React.forwardRef((_ref, ref) => {\n  let {\n    resolution = 28,\n    maxPolyCount = 10000,\n    enableUvs = false,\n    enableColors = false,\n    children,\n    ...props\n  } = _ref;\n  const marchingCubesRef = React.useRef(null);\n  const marchingCubes = React.useMemo(() => new MarchingCubes$1(resolution, new MeshStandardMaterial(), enableUvs, enableColors, maxPolyCount), [resolution, maxPolyCount, enableUvs, enableColors]);\n  const api = React.useMemo(() => ({\n    getParent: () => marchingCubesRef\n  }), []);\n  useFrame(() => {\n    marchingCubes.reset();\n  }, -1); // To make sure the reset runs before the balls or planes are added\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"primitive\", _extends({\n    object: marchingCubes,\n    ref: mergeRefs([marchingCubesRef, ref])\n  }, props), /*#__PURE__*/React.createElement(globalContext.Provider, {\n    value: api\n  }, children)));\n});\nconst MarchingCube = /*#__PURE__*/React.forwardRef((_ref2, ref) => {\n  let {\n    strength = 0.5,\n    subtract = 12,\n    color = new Color('#fff'),\n    ...props\n  } = _ref2;\n  const {\n    getParent\n  } = React.useContext(globalContext);\n  const parentRef = React.useMemo(() => getParent(), [getParent]);\n  const cubeRef = React.useRef();\n  useFrame(() => {\n    if (!parentRef.current || !cubeRef.current) return;\n    parentRef.current.addBall(cubeRef.current.position.x, cubeRef.current.position.y, cubeRef.current.position.z, strength, subtract, color);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: mergeRefs([ref, cubeRef])\n  }, props));\n});\nconst MarchingPlane = /*#__PURE__*/React.forwardRef((_ref3, ref) => {\n  let {\n    planeType: _planeType = 'x',\n    strength = 0.5,\n    subtract = 12,\n    ...props\n  } = _ref3;\n  const {\n    getParent\n  } = React.useContext(globalContext);\n  const parentRef = React.useMemo(() => getParent(), [getParent]);\n  const wallRef = React.useRef();\n  const planeType = React.useMemo(() => _planeType === 'x' ? 'addPlaneX' : _planeType === 'y' ? 'addPlaneY' : 'addPlaneZ', [_planeType]);\n  useFrame(() => {\n    if (!parentRef.current || !wallRef.current) return;\n    parentRef.current[planeType](strength, subtract);\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({\n    ref: mergeRefs([ref, wallRef])\n  }, props));\n});\nexport { MarchingCube, MarchingCubes, MarchingPlane };","map":null,"metadata":{},"sourceType":"module"}